{"ast":null,"code":"import _objectSpread from \"/Users/albert/projects/med-bakery-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nexport var createPostMessageFactory = function createPostMessageFactory(generateUniqueNumber) {\n  return function (ongoingRequests, port) {\n    return function (message) {\n      var transferables = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      return new Promise(function (resolve, reject) {\n        var id = generateUniqueNumber(ongoingRequests);\n        ongoingRequests.set(id, {\n          reject: reject,\n          resolve: resolve\n        });\n        port.postMessage(_objectSpread({\n          id: id\n        }, message), transferables);\n      });\n    };\n  };\n};","map":{"version":3,"sources":["../../../src/factories/post-message-factory.ts"],"names":[],"mappings":";AAEA,OAAO,IAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAAC,oBAAD,EAA8D;AAClG,SAAO,UAAC,eAAD,EAAwE,IAAxE,EAA6F;AAChG,WAAO,UAAC,OAAD,EAAoG;AAAA,UAArD,aAAqD,uEAArB,EAAqB;AACvG,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAoB;AACnC,YAAM,EAAE,GAAG,oBAAoB,CAAC,eAAD,CAA/B;AAEA,QAAA,eAAe,CAAC,GAAhB,CAAoB,EAApB,EAAwB;AAAE,UAAA,MAAM,EAAN,MAAF;AAAU,UAAA,OAAO,EAAP;AAAV,SAAxB;AAEA,QAAA,IAAI,CAAC,WAAL;AAAmB,UAAA,EAAE,EAAF;AAAnB,WAA0B,OAA1B,GAAqC,aAArC;AACH,OANM,CAAP;AAOH,KARD;AASH,GAVD;AAWH,CAZM","sourceRoot":"","sourcesContent":["export const createPostMessageFactory = (generateUniqueNumber) => {\n    return (ongoingRequests, port) => {\n        return (message, transferables = []) => {\n            return new Promise((resolve, reject) => {\n                const id = generateUniqueNumber(ongoingRequests);\n                ongoingRequests.set(id, { reject, resolve });\n                port.postMessage({ id, ...message }, transferables);\n            });\n        };\n    };\n};\n//# sourceMappingURL=post-message-factory.js.map"]},"metadata":{},"sourceType":"module"}