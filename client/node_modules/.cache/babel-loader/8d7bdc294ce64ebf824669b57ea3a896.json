{"ast":null,"code":"export var createMediaDevices = function createMediaDevices(emitNotSupportedError, window, wrapSubscribeFunction) {\n  return function () {\n    return wrapSubscribeFunction(function (observer) {\n      if (window === null || window.navigator === undefined || window.navigator.mediaDevices === undefined || window.navigator.mediaDevices.enumerateDevices === undefined) {\n        return emitNotSupportedError(observer);\n      }\n\n      var isActive = true;\n\n      var enumerateDevices = function enumerateDevices() {\n        window.navigator.mediaDevices.enumerateDevices().then(function (mediaDevices) {\n          if (isActive) {\n            observer.next(mediaDevices);\n          }\n        }, function (err) {\n          if (isActive) {\n            unsubscribe();\n            observer.error(err);\n          }\n        });\n      };\n\n      var unsubscribe = function unsubscribe() {\n        isActive = false;\n        window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n      };\n\n      enumerateDevices();\n      window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n      return unsubscribe;\n    });\n  };\n};","map":{"version":3,"sources":["../../../src/factories/media-devices.ts"],"names":[],"mappings":"AAEA,OAAO,IAAM,kBAAkB,GAAyB,SAA3C,kBAA2C,CAAC,qBAAD,EAAwB,MAAxB,EAAgC,qBAAhC,EAAyD;AAC7G,SAAO;AAAA,WACH,qBAAqB,CAAC,UAAC,QAAD,EAAa;AAC/B,UACI,MAAM,KAAK,IAAX,IACA,MAAM,CAAC,SAAP,KAAqB,SADrB,IAEA,MAAM,CAAC,SAAP,CAAiB,YAAjB,KAAkC,SAFlC,IAGA,MAAM,CAAC,SAAP,CAAiB,YAAjB,CAA8B,gBAA9B,KAAmD,SAJvD,EAKE;AACE,eAAO,qBAAqB,CAAC,QAAD,CAA5B;AACH;;AAED,UAAI,QAAQ,GAAG,IAAf;;AAEA,UAAM,gBAAgB,GAAG,SAAnB,gBAAmB,GAAK;AAC1B,QAAA,MAAM,CAAC,SAAP,CAAiB,YAAjB,CAA8B,gBAA9B,GAAiD,IAAjD,CACI,UAAC,YAAD,EAAiB;AACb,cAAI,QAAJ,EAAc;AACV,YAAA,QAAQ,CAAC,IAAT,CAAc,YAAd;AACH;AACJ,SALL,EAMI,UAAC,GAAD,EAAQ;AACJ,cAAI,QAAJ,EAAc;AACV,YAAA,WAAW;AAEX,YAAA,QAAQ,CAAC,KAAT,CAAe,GAAf;AACH;AACJ,SAZL;AAcH,OAfD;;AAgBA,UAAM,WAAW,GAAG,SAAd,WAAc,GAAK;AACrB,QAAA,QAAQ,GAAG,KAAX;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,YAAjB,CAA8B,mBAA9B,CAAkD,cAAlD,EAAkE,gBAAlE;AACH,OAHD;;AAKA,MAAA,gBAAgB;AAChB,MAAA,MAAM,CAAC,SAAP,CAAiB,YAAjB,CAA8B,gBAA9B,CAA+C,cAA/C,EAA+D,gBAA/D;AAEA,aAAO,WAAP;AACH,KArCoB,CADlB;AAAA,GAAP;AAuCH,CAxCM","sourceRoot":"","sourcesContent":["export const createMediaDevices = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () => wrapSubscribeFunction((observer) => {\n        if (window === null ||\n            window.navigator === undefined ||\n            window.navigator.mediaDevices === undefined ||\n            window.navigator.mediaDevices.enumerateDevices === undefined) {\n            return emitNotSupportedError(observer);\n        }\n        let isActive = true;\n        const enumerateDevices = () => {\n            window.navigator.mediaDevices.enumerateDevices().then((mediaDevices) => {\n                if (isActive) {\n                    observer.next(mediaDevices);\n                }\n            }, (err) => {\n                if (isActive) {\n                    unsubscribe();\n                    observer.error(err);\n                }\n            });\n        };\n        const unsubscribe = () => {\n            isActive = false;\n            window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n        };\n        enumerateDevices();\n        window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n        return unsubscribe;\n    });\n};\n//# sourceMappingURL=media-devices.js.map"]},"metadata":{},"sourceType":"module"}