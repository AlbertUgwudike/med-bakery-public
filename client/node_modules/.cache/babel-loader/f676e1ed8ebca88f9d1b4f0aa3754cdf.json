{"ast":null,"code":"export var createMediaDevices = function createMediaDevices(emitNotSupportedError, window, wrapSubscribeFunction) {\n  return function () {\n    return wrapSubscribeFunction(function (observer) {\n      if (window === null || window.navigator === undefined || window.navigator.mediaDevices === undefined || window.navigator.mediaDevices.enumerateDevices === undefined) {\n        return emitNotSupportedError(observer);\n      }\n\n      var isActive = true;\n\n      var enumerateDevices = function enumerateDevices() {\n        window.navigator.mediaDevices.enumerateDevices().then(function (mediaDevices) {\n          if (isActive) {\n            observer.next(mediaDevices);\n          }\n        }, function (err) {\n          if (isActive) {\n            unsubscribe();\n            observer.error(err);\n          }\n        });\n      };\n\n      var unsubscribe = function unsubscribe() {\n        isActive = false;\n        window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n      };\n\n      enumerateDevices();\n      window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n      return unsubscribe;\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}