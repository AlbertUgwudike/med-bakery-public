{"version":3,"file":"analytics-util-types.modern.js","sources":["../src/index.js"],"sourcesContent":["\n/*\n  Constants for reuse\n*/\n\nexport const FUNCTION = 'function'\nexport const STRING = 'string'\nexport const UNDEFINED = 'undefined'\nexport const BOOLEAN = 'boolean'\nexport const OBJECT = 'object'\nexport const ARRAY = 'array'\nexport const NUMBER = 'number'\nexport const noOp = () => {}\nexport const ANY = 'any'\nexport const ALL = '*'\n\n/* ────────────────────\nEnvironment checks\n─────────────────────── */\n\n/** @type {Boolean} */\nexport const isBrowser = typeof window !== UNDEFINED\n\n/** @type {Boolean} */\nexport const isNode = typeof process !== UNDEFINED && process.versions != null && process.versions.node != null\n\n/** @type {Boolean} */\nexport const isDeno = typeof Deno !== UNDEFINED && typeof Deno.core !== UNDEFINED;\n\n/** @type {Boolean} */\nexport const isWebWorker = typeof self === OBJECT && self.constructor && self.constructor.name === 'DedicatedWorkerGlobalScope'\n\n/** @type {Boolean} */\nexport const isJsDom = (isBrowser && window.name === 'nodejs') || (typeof navigator !== UNDEFINED && (navigator.userAgent.includes('Node.js') || navigator.userAgent.includes('jsdom')))\n\n/* ────────────────────\nType checks\n─────────────────────── */\n\n/** \n * Check if value is function.\n * @param x\n * @return {x is Function}\n */\nexport function isFunction(x) {\n  return typeof x === FUNCTION\n}\n\n/** \n * Check if value is ES2015 `class`.\n * @param x\n * @return {x is Class}\n */\nexport function isClass(x) {\n  if (isFunction(x)) {\n    return /^class /.test(Function.prototype.toString.call(x))\n  }\n  return false\n}\n\n/** \n * Check if value is string.\n * @param x\n * @return {x is string}\n */\nexport function isString(x) {\n  return typeof x === STRING\n}\n\n/** \n * Check if value is number.\n * @param n\n * @return {boolean}\n * @example\n * > isNumber(0)\n * true\n * > isNumber(1)\n * true\n * > isNumber(1.1)\n * true\n * > isNumber(0xff)\n * true\n * > isNumber(0644)\n * true\n * > isNumber(6.2e5)\n * true\n * > isNumber(NaN)\n * false\n * > isNumber(Infinity)\n * true\n */\nexport function isNumber(n) {\n  return !isNaN(parseFloat(n))\n}\n\n/** \n * Check if value is undefined.\n * @param x\n * @return {x is undefined}\n */\nexport function isUndefined(x) {\n  return typeof x === UNDEFINED\n}\n\n/** \n * @param x\n * @return {x is boolean}\n */\nexport function isBoolean(x) {\n  return typeof x === BOOLEAN\n}\n\n/** \n * @param x\n * @return {x is boolean}\n */\nexport function isNull(x) {\n  return x === null\n}\n\n/** \n * @template T\n * @param x\n * @return {x is Array<T>}\n */\nexport function isArray(x) {\n  return Object.prototype.toString.call(x) === '[object Array]'\n}\n\n/** \n * @param obj\n * @return {obj is Object}\n */\nexport function isObject(obj) {\n  if (typeof obj !== OBJECT || obj === null) return false\n\n  let proto = obj\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto)\n  }\n\n  return Object.getPrototypeOf(obj) === proto\n}\n\n/** \n * Is primative value\n * @param x\n * @return {boolean}\n * @example\n   isPrimitive(true) =>  true\n   isPrimitive({}) => false\n   isPrimitive(0) =>  true\n   isPrimitive('1') =>  true\n   isPrimitive(1.1) =>  true\n   isPrimitive(NaN) =>  true\n   isPrimitive(Infinity) =>  true\n   isPrimitive(function() {}) => false\n   isPrimitive(Date), => false\n   isPrimitive(null) =>  true\n   isPrimitive(undefined) =>  true\n */\nexport function isPrimitive (x) {\n  if (x === null) return true\n  switch (typeof x) {\n    case STRING:\n    case NUMBER:\n    case 'symbol':\n    case UNDEFINED:\n    case BOOLEAN:\n      return true\n    default:\n      return false\n  }\n}\n\n/**\n * Returns true if the input is a Promise.\n * @param {*} input - The input to test\n * @returns {boolean}\n * @static\n */\nexport function isPromise(x) {\n  if (!x) return false\n  return !!(!isUndefined(Promise) && x instanceof Promise || x.then && isFunction(x.then))\n}\n\n/**\n * Check if value is regexp\n * @param {*} value - Value to check\n * @return {boolean} \n */\nexport function isRegex(value) {\n  return value instanceof RegExp\n}\n\n/** \n * @param func - function to check if noOp\n * @return {Boolean} - is noOp\n * @examples\n   function foo() {}\n   isNoOp(foo) // true\n   isNoOp(() => { }) // true\n   isNoOp(() => { console.log('hi') }) // false\n */\nexport function isNoOp(func) {\n  if (!isFunction(func)) return false\n  const emptyFunc = /{(\\r|\\n|\\s)*}/gm\n  const noOpStr = noOp.toString()\n  const funcString = (func.toString().match(emptyFunc) || [''])[0].replace(emptyFunc, noOpStr)\n  return noOpStr === funcString\n}\n\n/**\n * Check if value is truthy\n * @param {*} value \n * @return {Boolean} - is truthy value\n */\nexport function isTruthy(v) {\n  if (isString(v) && v.toLowerCase() === 'false') return false\n  return !!v\n}\n\n/**\n * Check if value is email\n * @param {*} str \n * @return {Boolean} - is email like value\n */\nexport function isEmail(str) {\n  if (str.length > 320) return false\n  return /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(str)\n}\n\n/* ────────────────────\nHTML Element checks\n─────────────────────── */\n\n/** \n * @param obj\n * @return {obj is NodeList}\n */\nexport function isNodeList(obj) {\n  return NodeList.prototype.isPrototypeOf(obj)\n}\n\n/**\n * Check if input is DOM element\n * @param {HTMLElement|*} element\n * @return {boolean} \n */\nexport function isElement(element) {\n  return element instanceof Element || element instanceof HTMLDocument\n}\n\n/**\n * Check if element is form element\n * @param {HTMLElement} element\n * @return {boolean} \n */\nexport function isForm(element) {\n  return isElement(element) && element.nodeName === 'FORM'\n}\n\n/**\n * Check if DOM element is hidden\n * @param {HTMLElement|null|undefined} element\n * @param {HTMLElement|null|undefined} until \n * @return {boolean} \n */\nexport function isHidden(element, until) {\n  if (!element || getComputedStyle(element).visibility === 'hidden') return true\n\n  while (element) {\n    if (until != null && element === until) return false\n    if (getComputedStyle(element).display === 'none') return true\n    element = element.parentElement\n  }\n\n  return false\n}"],"names":["FUNCTION","STRING","UNDEFINED","BOOLEAN","OBJECT","ARRAY","NUMBER","noOp","ANY","ALL","isBrowser","window","isNode","process","versions","node","isDeno","Deno","core","isWebWorker","self","constructor","name","isJsDom","navigator","userAgent","includes","isFunction","x","isClass","test","Function","prototype","toString","call","isString","isNumber","n","isNaN","parseFloat","isUndefined","isBoolean","isNull","isArray","Object","isObject","obj","proto","getPrototypeOf","isPrimitive","isPromise","Promise","then","isRegex","value","RegExp","isNoOp","func","emptyFunc","noOpStr","match","replace","isTruthy","v","toLowerCase","isEmail","str","length","isNodeList","NodeList","isPrototypeOf","isElement","element","Element","HTMLDocument","isForm","nodeName","isHidden","until","getComputedStyle","visibility","display","parentElement"],"mappings":"AAKaA,MAAAA,EAAW,WACXC,EAAS,SACTC,EAAY,YACZC,EAAU,UACVC,EAAS,SACTC,EAAQ,QACRC,EAAS,SACTC,EAAO,OACPC,EAAM,MACNC,EAAM,IAONC,EAdY,oBAcOC,OAGnBC,EAjBY,oBAiBIC,SAA6C,MAApBA,QAAQC,UAA6C,MAAzBD,QAAQC,SAASC,KAGtFC,EApBY,oBAoBIC,WApBJ,IAoBiCA,KAAKC,KAGlDC,EArBS,iBAqBYC,MAAmBA,KAAKC,aAAyC,+BAA1BD,KAAKC,YAAYC,KAG7EC,EAAWb,GAA6B,WAAhBC,OAAOW,MA1BnB,oBA0BiDE,YAA4BA,UAAUC,UAAUC,SAAS,YAAcF,UAAUC,UAAUC,SAAS,mBAW9JC,EAAWC,GACzB,MAxCsB,mBAwCRA,WAQAC,EAAQD,GACtB,QAAID,EAAWC,cACIE,KAAKC,SAASC,UAAUC,SAASC,KAAKN,aAU3CO,EAASP,GACvB,MA5DoB,iBA4DNA,WAyBAQ,EAASC,GACvB,OAAQC,MAAMC,WAAWF,aAQXG,EAAYZ,GAC1B,YA9FuB,IA8FTA,WAOAa,EAAUb,GACxB,MArGqB,kBAqGPA,WAOAc,EAAOd,GACrB,OAAa,OAANA,WAQOe,EAAQf,GACtB,MAA6C,mBAAtCgB,OAAOZ,UAAUC,SAASC,KAAKN,YAOxBiB,EAASC,GACvB,GA7HoB,iBA6HTA,GAA0B,OAARA,EAAc,SAE3C,IAAIC,EAAQD,EACZ,KAAwC,OAAjCF,OAAOI,eAAeD,IAC3BA,EAAQH,OAAOI,eAAeD,GAGhC,OAAOH,OAAOI,eAAeF,KAASC,WAoBxBE,EAAarB,GAC3B,GAAU,OAANA,EAAY,SAChB,cAAeA,GACb,IA9JkB,SA+JlB,IA1JkB,SA2JlB,IAAK,SACL,IAhKqB,YAiKrB,IAhKmB,UAiKjB,SACF,QACE,mBAUUsB,EAAUtB,GACxB,QAAKA,OACMY,EAAYW,UAAYvB,aAAauB,SAAWvB,EAAEwB,MAAQzB,EAAWC,EAAEwB,gBAQpEC,EAAQC,GACtB,OAAOA,aAAiBC,gBAYVC,EAAOC,GACrB,IAAK9B,EAAW8B,GAAO,SACvB,MAAMC,EAAY,kBACZC,EAAUpD,EAAK0B,WAErB,OAAO0B,KADaF,EAAKxB,WAAW2B,MAAMF,IAAc,CAAC,KAAK,GAAGG,QAAQH,EAAWC,YAStEG,EAASC,GACvB,QAAI5B,EAAS4B,IAA0B,UAApBA,EAAEC,gBACZD,YAQKE,EAAQC,GACtB,QAAIA,EAAIC,OAAS,8IAC8HrC,KAAKoC,YAWtIE,EAAWtB,GACzB,OAAOuB,SAASrC,UAAUsC,cAAcxB,YAQ1ByB,EAAUC,GACxB,OAAOA,aAAmBC,SAAWD,aAAmBE,sBAQ1CC,EAAOH,GACrB,OAAOD,EAAUC,IAAiC,SAArBA,EAAQI,kBASvBC,EAASL,EAASM,GAChC,IAAKN,GAAoD,WAAzCO,iBAAiBP,GAASQ,WAAyB,SAEnE,KAAOR,GAAS,CACd,GAAa,MAATM,GAAiBN,IAAYM,EAAO,SACxC,GAA0C,SAAtCC,iBAAiBP,GAASS,QAAoB,SAClDT,EAAUA,EAAQU,cAGpB"}