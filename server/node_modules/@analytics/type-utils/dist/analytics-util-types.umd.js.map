{"version":3,"file":"analytics-util-types.umd.js","sources":["../src/index.js"],"sourcesContent":["\n/*\n  Constants for reuse\n*/\n\nexport const FUNCTION = 'function'\nexport const STRING = 'string'\nexport const UNDEFINED = 'undefined'\nexport const BOOLEAN = 'boolean'\nexport const OBJECT = 'object'\nexport const ARRAY = 'array'\nexport const NUMBER = 'number'\nexport const noOp = () => {}\nexport const ANY = 'any'\nexport const ALL = '*'\n\n/* ────────────────────\nEnvironment checks\n─────────────────────── */\n\n/** @type {Boolean} */\nexport const isBrowser = typeof window !== UNDEFINED\n\n/** @type {Boolean} */\nexport const isNode = typeof process !== UNDEFINED && process.versions != null && process.versions.node != null\n\n/** @type {Boolean} */\nexport const isDeno = typeof Deno !== UNDEFINED && typeof Deno.core !== UNDEFINED;\n\n/** @type {Boolean} */\nexport const isWebWorker = typeof self === OBJECT && self.constructor && self.constructor.name === 'DedicatedWorkerGlobalScope'\n\n/** @type {Boolean} */\nexport const isJsDom = (isBrowser && window.name === 'nodejs') || (typeof navigator !== UNDEFINED && (navigator.userAgent.includes('Node.js') || navigator.userAgent.includes('jsdom')))\n\n/* ────────────────────\nType checks\n─────────────────────── */\n\n/** \n * Check if value is function.\n * @param x\n * @return {x is Function}\n */\nexport function isFunction(x) {\n  return typeof x === FUNCTION\n}\n\n/** \n * Check if value is ES2015 `class`.\n * @param x\n * @return {x is Class}\n */\nexport function isClass(x) {\n  if (isFunction(x)) {\n    return /^class /.test(Function.prototype.toString.call(x))\n  }\n  return false\n}\n\n/** \n * Check if value is string.\n * @param x\n * @return {x is string}\n */\nexport function isString(x) {\n  return typeof x === STRING\n}\n\n/** \n * Check if value is number.\n * @param n\n * @return {boolean}\n * @example\n * > isNumber(0)\n * true\n * > isNumber(1)\n * true\n * > isNumber(1.1)\n * true\n * > isNumber(0xff)\n * true\n * > isNumber(0644)\n * true\n * > isNumber(6.2e5)\n * true\n * > isNumber(NaN)\n * false\n * > isNumber(Infinity)\n * true\n */\nexport function isNumber(n) {\n  return !isNaN(parseFloat(n))\n}\n\n/** \n * Check if value is undefined.\n * @param x\n * @return {x is undefined}\n */\nexport function isUndefined(x) {\n  return typeof x === UNDEFINED\n}\n\n/** \n * @param x\n * @return {x is boolean}\n */\nexport function isBoolean(x) {\n  return typeof x === BOOLEAN\n}\n\n/** \n * @param x\n * @return {x is boolean}\n */\nexport function isNull(x) {\n  return x === null\n}\n\n/** \n * @template T\n * @param x\n * @return {x is Array<T>}\n */\nexport function isArray(x) {\n  return Object.prototype.toString.call(x) === '[object Array]'\n}\n\n/** \n * @param obj\n * @return {obj is Object}\n */\nexport function isObject(obj) {\n  if (typeof obj !== OBJECT || obj === null) return false\n\n  let proto = obj\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto)\n  }\n\n  return Object.getPrototypeOf(obj) === proto\n}\n\n/** \n * Is primative value\n * @param x\n * @return {boolean}\n * @example\n   isPrimitive(true) =>  true\n   isPrimitive({}) => false\n   isPrimitive(0) =>  true\n   isPrimitive('1') =>  true\n   isPrimitive(1.1) =>  true\n   isPrimitive(NaN) =>  true\n   isPrimitive(Infinity) =>  true\n   isPrimitive(function() {}) => false\n   isPrimitive(Date), => false\n   isPrimitive(null) =>  true\n   isPrimitive(undefined) =>  true\n */\nexport function isPrimitive (x) {\n  if (x === null) return true\n  switch (typeof x) {\n    case STRING:\n    case NUMBER:\n    case 'symbol':\n    case UNDEFINED:\n    case BOOLEAN:\n      return true\n    default:\n      return false\n  }\n}\n\n/**\n * Returns true if the input is a Promise.\n * @param {*} input - The input to test\n * @returns {boolean}\n * @static\n */\nexport function isPromise(x) {\n  if (!x) return false\n  return !!(!isUndefined(Promise) && x instanceof Promise || x.then && isFunction(x.then))\n}\n\n/**\n * Check if value is regexp\n * @param {*} value - Value to check\n * @return {boolean} \n */\nexport function isRegex(value) {\n  return value instanceof RegExp\n}\n\n/** \n * @param func - function to check if noOp\n * @return {Boolean} - is noOp\n * @examples\n   function foo() {}\n   isNoOp(foo) // true\n   isNoOp(() => { }) // true\n   isNoOp(() => { console.log('hi') }) // false\n */\nexport function isNoOp(func) {\n  if (!isFunction(func)) return false\n  const emptyFunc = /{(\\r|\\n|\\s)*}/gm\n  const noOpStr = noOp.toString()\n  const funcString = (func.toString().match(emptyFunc) || [''])[0].replace(emptyFunc, noOpStr)\n  return noOpStr === funcString\n}\n\n/**\n * Check if value is truthy\n * @param {*} value \n * @return {Boolean} - is truthy value\n */\nexport function isTruthy(v) {\n  if (isString(v) && v.toLowerCase() === 'false') return false\n  return !!v\n}\n\n/**\n * Check if value is email\n * @param {*} str \n * @return {Boolean} - is email like value\n */\nexport function isEmail(str) {\n  if (str.length > 320) return false\n  return /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(str)\n}\n\n/* ────────────────────\nHTML Element checks\n─────────────────────── */\n\n/** \n * @param obj\n * @return {obj is NodeList}\n */\nexport function isNodeList(obj) {\n  return NodeList.prototype.isPrototypeOf(obj)\n}\n\n/**\n * Check if input is DOM element\n * @param {HTMLElement|*} element\n * @return {boolean} \n */\nexport function isElement(element) {\n  return element instanceof Element || element instanceof HTMLDocument\n}\n\n/**\n * Check if element is form element\n * @param {HTMLElement} element\n * @return {boolean} \n */\nexport function isForm(element) {\n  return isElement(element) && element.nodeName === 'FORM'\n}\n\n/**\n * Check if DOM element is hidden\n * @param {HTMLElement|null|undefined} element\n * @param {HTMLElement|null|undefined} until \n * @return {boolean} \n */\nexport function isHidden(element, until) {\n  if (!element || getComputedStyle(element).visibility === 'hidden') return true\n\n  while (element) {\n    if (until != null && element === until) return false\n    if (getComputedStyle(element).display === 'none') return true\n    element = element.parentElement\n  }\n\n  return false\n}"],"names":["FUNCTION","STRING","UNDEFINED","BOOLEAN","OBJECT","NUMBER","noOp","isBrowser","window","isNode","process","versions","node","isDeno","Deno","core","isWebWorker","self","constructor","name","isJsDom","navigator","userAgent","includes","isFunction","x","isString","isUndefined","isElement","element","Element","HTMLDocument","Object","prototype","toString","call","test","Function","str","length","nodeName","until","getComputedStyle","visibility","display","parentElement","func","emptyFunc","noOpStr","match","replace","obj","NodeList","isPrototypeOf","n","isNaN","parseFloat","proto","getPrototypeOf","Promise","then","value","RegExp","v","toLowerCase"],"mappings":"uOAKaA,EAAW,WACXC,EAAS,SACTC,EAAY,YACZC,EAAU,UACVC,EAAS,SAETC,EAAS,SACTC,EAAO,aASPC,SAAmBC,SAAWN,EAG9BO,SAAgBC,UAAYR,GAAiC,MAApBQ,QAAQC,UAA6C,MAAzBD,QAAQC,SAASC,KAGtFC,SAAgBC,OAASZ,UAAoBY,KAAKC,OAASb,EAG3Dc,SAAqBC,OAASb,GAAUa,KAAKC,aAAyC,+BAA1BD,KAAKC,YAAYC,KAG7EC,EAAWb,GAA6B,WAAhBC,OAAOW,aAA8BE,YAAcnB,IAAcmB,UAAUC,UAAUC,SAAS,YAAcF,UAAUC,UAAUC,SAAS,mBAW9JC,EAAWC,GACzB,cAAcA,IAAMzB,WAoBN0B,EAASD,GACvB,cAAcA,IAAMxB,WAkCN0B,EAAYF,GAC1B,cAAcA,IAAMvB,WAoJN0B,EAAUC,GACxB,OAAOA,aAAmBC,SAAWD,aAAmBE,mBA5OvC,UADA,cAHE,mGAmHGN,GACtB,MAA6C,mBAAtCO,OAAOC,UAAUC,SAASC,KAAKV,yBAlBdA,GACxB,cAAcA,IAAMtB,oCAxDEsB,GACtB,QAAID,EAAWC,cACIW,KAAKC,SAASJ,UAAUC,SAASC,KAAKV,iDA4KnCa,GACtB,QAAIA,EAAIC,OAAS,8IAC8HH,KAAKE,sBA6B/HT,GACrB,OAAOD,EAAUC,IAAiC,SAArBA,EAAQW,6CASdX,EAASY,GAChC,IAAKZ,GAAoD,WAAzCa,iBAAiBb,GAASc,WAAyB,SAEnE,KAAOd,GAAS,CACd,GAAa,MAATY,GAAiBZ,IAAYY,EAAO,SACxC,GAA0C,SAAtCC,iBAAiBb,GAASe,QAAoB,SAClDf,EAAUA,EAAQgB,cAGpB,wCAzEqBC,GACrB,IAAKtB,EAAWsB,GAAO,SACvB,IAAMC,EAAY,kBACZC,EAAU1C,EAAK4B,WAErB,OAAOc,KADaF,EAAKZ,WAAWe,MAAMF,IAAc,CAAC,KAAK,GAAGG,QAAQH,EAAWC,qCAgC3DG,GACzB,OAAOC,SAASnB,UAAUoB,cAAcF,sBA7HnB1B,GACrB,OAAa,OAANA,uBA1BgB6B,GACvB,OAAQC,MAAMC,WAAWF,yBAyCFH,GACvB,UAAWA,IAAQ/C,GAAkB,OAAR+C,EAAc,SAG3C,IADA,IAAIM,EAAQN,EAC4B,OAAjCnB,OAAO0B,eAAeD,IAC3BA,EAAQzB,OAAO0B,eAAeD,GAGhC,OAAOzB,OAAO0B,eAAeP,KAASM,0BAoBXhC,GAC3B,GAAU,OAANA,EAAY,SAChB,cAAeA,GACb,KAAKxB,EACL,KAAKI,EACL,IAAK,SACL,KAAKH,EACL,KAAKC,EACH,SACF,QACE,gCAUoBsB,GACxB,QAAKA,OACME,EAAYgC,UAAYlC,aAAakC,SAAWlC,EAAEmC,MAAQpC,EAAWC,EAAEmC,2BAQ5DC,GACtB,OAAOA,aAAiBC,yCAyBDC,GACvB,QAAIrC,EAASqC,IAA0B,UAApBA,EAAEC,gBACZD"}