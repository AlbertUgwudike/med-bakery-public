!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e||self).analyticUtil={})}(this,function(e){var r=function(e){var r={exports:{}};return function(e,r){e.exports=function(e,r,n,t,o){for(r=r.split?r.split("."):r,t=0;t<r.length;t++)e=e?e[r[t]]:o;return e===o?n:e}}(r),r.exports}();function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}var t="undefined"!=typeof window;function o(e){if(!t)return!1;var r=e||document.referrer;if(r){var n=window.document.location.port,o=r.split("/")[2];return n&&(o=o.replace(":"+n,"")),o!==window.location.hostname}return!1}function i(e,r){var n=(e.split("?")||[,])[1];if(!n||-1===n.indexOf(r))return e;var t=new RegExp("(\\&|\\?)"+r+'([_A-Za-z0-9"+=.\\/\\-@%]+)',"g"),o=("?"+n).replace(t,"").replace(/^&/,"?");return e.replace("?"+n,o)}function a(e){return function(e){for(var r,t=Object.create(null),o=/([^&=]+)=?([^&]*)/g;r=o.exec(e);){var i=n(r[1]),a=n(r[2]);"[]"===i.substring(i.length-2)?(t[i=i.substring(0,i.length-2)]||(t[i]=[])).push(a):t[i]=""===a||a}for(var c in t){var s=c.split("[");s.length>1&&(u(t,s.map(function(e){return e.replace(/[?[\]\\ ]/g,"")}),t[c]),delete t[c])}return t}(function(e){if(e){var r=e.match(/\?(.*)/);return r&&r[1]?r[1].split("#")[0]:""}return t&&window.location.search.substring(1)}(e))}function u(e,r,n){for(var t=r.length-1,o=0;o<t;++o){var i=r[o];if("__proto__"===i||"constructor"===i)break;i in e||(e[i]={}),e=e[i]}e[r[t]]=n}function c(e){if(!t)return null;var r=document.createElement("a");return r.setAttribute("href",e),r.hostname}function s(e){return(c(e)||"").split(".").slice(-2).join(".")}function l(e){var r=e.split(".");return r.length>1?r.slice(0,-1).join("."):e}"undefined"!=typeof process&&null!=process.versions&&process,"undefined"!=typeof Deno&&Deno,t&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));var f={trimTld:l,getDomainBase:s,getDomainHost:c},d="google",m="q",p={"daum.net":m,"eniro.se":"search_word","naver.com":"query","yahoo.com":"p","msn.com":m,"aol.com":m,"ask.com":m,"baidu.com":"wd","yandex.com":"text","rambler.ru":"words",google:m,"bing.com":{p:m,n:"live"}};e.decodeUri=n,e.dotProp=r,e.getBrowserLocale=function(){if(t){var e=navigator,r=e.languages;return e.userLanguage||(r&&r.length?r[0]:e.language)}},e.getTimeZone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}},e.isExternalReferrer=o,e.isScriptLoaded=function(e){if(!t)return!0;var r=document.getElementsByTagName("script");return!!Object.keys(r).filter(function(n){var t=r[n].src;return"string"==typeof e?-1!==t.indexOf(e):!!(e instanceof RegExp)&&t.match(e)}).length},e.paramsClean=i,e.paramsGet=function(e,r){return n((RegExp(e+"=(.+?)(&|$)").exec(r)||[,""])[1])},e.paramsParse=a,e.paramsRemove=function(e,r){return t?new Promise(function(n,t){if(window.history&&window.history.replaceState){var o=window.location.href,a=i(o,e);o!==a&&history.replaceState({},"",a)}return r&&r(),n()}):Promise.resolve()},e.parseReferrer=function(e,r){if(!t)return!1;var n={source:"(direct)",medium:"(none)",campaign:"(not set)"};e&&o(e)&&(n.referrer=e);var i=function(e){if(!e||!t)return!1;var r=s(e),n=document.createElement("a");if(n.href=e,n.hostname.indexOf(d)>-1&&(r=d),p[r]){var i=p[r],a=new RegExp(("string"==typeof i?i:i.p)+"=.*?([^&#]*|$)","gi"),u=n.search.match(a);return{source:i.n||l(r),medium:"organic",term:(u?u[0].split("=")[1]:"")||"(not provided)"}}var c=o(e)?"referral":"internal";return{source:n.hostname,medium:c}}(e);i&&Object.keys(i).length&&(n=Object.assign({},n,i));var u=a(r),c=Object.keys(u);if(!c.length)return n;var f=c.reduce(function(e,r){return r.match(/^utm_/)&&(e[""+r.replace(/^utm_/,"")]=u[r]),r.match(/^(d|g)clid/)&&(e.source=d,e.medium=u.gclid?"cpc":"cpm",e[r]=u[r]),e},{});return Object.assign({},n,f)},e.throttle=function(e,r){var n,t,o,i=null,a=0,u=function(){a=new Date,i=null,o=e.apply(n,t)};return function(){var c=new Date;a||(a=c);var s=r-(c-a);return n=this,t=arguments,s<=0?(clearTimeout(i),i=null,a=c,o=e.apply(n,t)):i||(i=setTimeout(u,s)),o}},e.url=f,e.uuid=function(){for(var e="",r=0,n=4294967295*Math.random()|0;r++<36;){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[r-1],o=15&n;e+="-"==t||"4"==t?t:("x"==t?o:3&o|8).toString(16),n=r%8==0?4294967295*Math.random()|0:n>>4}return e}});
//# sourceMappingURL=analytics-utils.umd.js.map
